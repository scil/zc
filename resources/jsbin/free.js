"use strict";var free={e:"\u771F".charCodeAt(0),_encodeCharCode:function _encodeCharCode(code){var n=code-free.e;if(n%2==0){n=n*2}else{n=n*3}n=n.toString();if(n.length>6)console.error("free._encodeCharCode for : "+n);n=["","0","00","000","0000","00000"][6-n.length]+n;return n},_decodeCharCode:function _decodeCharCode(charCode){var code=parseInt(charCode.substr(charCode.lastIndexOf("0-")+1),10);if(code%2==0){code=code/2}else{code=code/3}return String.fromCharCode(code+free.e)},encodeText:function encodeText(text){var c=[];for(var i=0;i<text.length;i++){c.push(free._encodeCharCode(text.charCodeAt(i)))}var code=c.join("");if(text==free.decodeTextCode(code)){return code}else{alert("wrong free.encodeText for "+text)}},decodeTextCode:function decodeTextCode(code){var text=[],lastCharIndex=code.length-6;for(var i=0;i<=lastCharIndex;i=i+6){text.push(free._decodeCharCode(code.substr(i,6)))}return text.join("")},_placeHolder:function _placeHolder(text){var placeholder="",i=text.length;while(i--){placeholder+=text.charCodeAt(i)>255?"__":"_"}return placeholder},_decodeDomTree:function _decodeDomTree(ele,codes){var freeTags=ele.getElementsByTagName(free.tag);if(!freeTags){return}if(typeof codes=="string")codes=codes.split("+");var freeEle,indexNotDependent=-1,code;for(var i=0,len=freeTags.length;i<len;i++){freeEle=freeTags[i];if(freeEle.hasAttribute("data-c")){freeEle.textContent=free.decodeTextCode(ele.getAttribute("data-c"));freeEle.removeAttribute("data-c")}else{indexNotDependent++;if(freeEle.hasAttribute("data-i")){code=codes[parseInt(freeEle.getAttribute("data-i"))];freeEle.removeAttribute("data-i")}else{code=codes[indexNotDependent]}}freeEle.textContent=free.decodeTextCode(code)}},decodeDomTrees:function decodeDomTrees($eles){$eles.each(function(){var codes=null;if(this.lastElementChild.hasAttribute("data-c"))codes=this.lastElementChild.getAttribute("data-c");free._decodeDomTree(this,codes)})},encodeTagedStringIndependently:function encodeTagedStringIndependently(rawStr){var encoded=rawStr.replace(/<z-free(.*?)>(.+?)<\/z-free>/g,function(match,attris,text){return"<z-free data-c=\""+free.encodeText(text)+"\""+attris+">"+free._placeHolder(text)+"</z-free>"});var restored=free.decodeTagedStringIndependently(encoded);if(restored==rawStr){return encoded}else{console.error("free.encodeTagedStringIndependently ");console.log("origin: ",rawStr);console.log("restored: ",restored);console.log("recoded : ",encoded)}},decodeTagedStringIndependently:function decodeTagedStringIndependently(codedStr){return codedStr.replace(/<z-free data-c="(\S+)"(.*?)>.+?<\/z-free>/g,function(match,code,attris){return"<z-free"+attris+">"+free.decodeTextCode(code)+"</z-free>"})},encodeTagedString:function encodeTagedString(rawStr){var all_codes=[],currentCode,currentCodeIndex=0,tagIndex=-1;var encoded=rawStr.replace(/<z-free(?: (en|es|ru)="([^"]+?)")?(.*?)>(.+?)<\/z-free>/g,function(match,lang,alt,attris,text){tagIndex++;currentCode=free.encodeText(text);currentCodeIndex=all_codes.indexOf(currentCode);if(currentCodeIndex==-1){all_codes.push(currentCode);currentCodeIndex=all_codes.length-1}var placeHolderText=alt||free._placeHolder(text);var langAttri="";if(alt&&lang){langAttri=" lang=\""+lang+"\""}if(currentCodeIndex!=tagIndex){return"<z-free"+langAttri+" data-i=\""+currentCodeIndex+"\""+attris+">"+placeHolderText+"</z-free>"}return"<z-free"+langAttri+attris+">"+placeHolderText+"</z-free>"});var codes=all_codes.join("+");var restored=this.decodeTagedString(encoded,codes);if(restored==rawStr){return{s:encoded,codes:codes}}else{console.error("free.encodeTagedString");console.log("origin: ",rawStr);console.log("restored: ",restored);console.log("recoded : ",encoded)}},decodeTagedString:function decodeTagedString(codedStr,codes){codes=codes.split("+");var tagIndex=-1;return codedStr.replace(/<z-free(?: lang="(en|es)")?(?: data-i="(\w+?)")?(.*?)>(.+?)<\/z-free>/g,function(match,lang,codeIndex,attris,alt){codeIndex=codeIndex||++tagIndex;if(lang){return"<z-free "+lang+"=\""+alt+"\""+attris+">"+free.decodeTextCode(codes[codeIndex])+"</z-free>"}else{return"<z-free"+attris+">"+free.decodeTextCode(codes[codeIndex])+"</z-free>"}})},hasZcCode:function hasZcCode(s){return s&&s.indexOf("<"+free.tag)>-1}};free.tag=free.decodeTextCode("-91119-60900-91179-91143-60788-60788");module.exports=free;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyZWUuanMiXSwibmFtZXMiOlsiZnJlZSIsImUiLCJjaGFyQ29kZUF0IiwiX2VuY29kZUNoYXJDb2RlIiwiY29kZSIsIm4iLCJ0b1N0cmluZyIsImxlbmd0aCIsImNvbnNvbGUiLCJlcnJvciIsIl9kZWNvZGVDaGFyQ29kZSIsImNoYXJDb2RlIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImVuY29kZVRleHQiLCJ0ZXh0IiwiYyIsImkiLCJwdXNoIiwiam9pbiIsImRlY29kZVRleHRDb2RlIiwiYWxlcnQiLCJsYXN0Q2hhckluZGV4IiwiX3BsYWNlSG9sZGVyIiwicGxhY2Vob2xkZXIiLCJfZGVjb2RlRG9tVHJlZSIsImVsZSIsImNvZGVzIiwiZnJlZVRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRhZyIsInNwbGl0IiwiZnJlZUVsZSIsImluZGV4Tm90RGVwZW5kZW50IiwibGVuIiwiaGFzQXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJkZWNvZGVEb21UcmVlcyIsIiRlbGVzIiwiZWFjaCIsImxhc3RFbGVtZW50Q2hpbGQiLCJlbmNvZGVUYWdlZFN0cmluZ0luZGVwZW5kZW50bHkiLCJyYXdTdHIiLCJlbmNvZGVkIiwicmVwbGFjZSIsIm1hdGNoIiwiYXR0cmlzIiwicmVzdG9yZWQiLCJkZWNvZGVUYWdlZFN0cmluZ0luZGVwZW5kZW50bHkiLCJsb2ciLCJjb2RlZFN0ciIsImVuY29kZVRhZ2VkU3RyaW5nIiwiYWxsX2NvZGVzIiwiY3VycmVudENvZGUiLCJjdXJyZW50Q29kZUluZGV4IiwidGFnSW5kZXgiLCJsYW5nIiwiYWx0IiwiaW5kZXhPZiIsInBsYWNlSG9sZGVyVGV4dCIsImxhbmdBdHRyaSIsImRlY29kZVRhZ2VkU3RyaW5nIiwicyIsImNvZGVJbmRleCIsImhhc1pjQ29kZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwi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biAqXG4gKiBmcmVlLmRlY29kZVRhZ2VkSHRtbFN0cmluZ0J5RG9tKCBmcmVlLmVuY29kZVRhZ2VkSHRtbFN0cmluZ0J5RG9tKCBtZC5yZW5kZXIoZWRpdG9yLnZhbHVlKCkgKSApICApXG4gKlxuICog5q+P5Liqei1mcmVl54us56uL5L+d5a2Y6Ieq5bex55qEY29kZe+8mlxuICogZnJlZS5kZWNvZGVUYWdlZEh0bWxTdHJpbmdCeURvbSggZnJlZS5lbmNvZGVUYWdlZEh0bWxTdHJpbmdCeURvbSggbWQucmVuZGVyKGVkaXRvci52YWx1ZSgpKSwgdHJ1ZSApLCB0cnVlICApXG4gKiAqL1xuXG52YXIgZnJlZSA9IHtcbiAgICBlOiAnXFx1NzcxZicuY2hhckNvZGVBdCgwKSwgLy8gMzA0OTVcbiAgICBfZW5jb2RlQ2hhckNvZGU6IGZ1bmN0aW9uIChjb2RlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICB2YXIgbiA9IGNvZGUgLSBmcmVlLmU7XG5cbiAgICAgICAgaWYgKG4gJSAyID09IDApIHtcbiAgICAgICAgICAgIG4gPSBuICogMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG4gPSBuICogMztcbiAgICAgICAgfVxuXG4gICAgICAgIG4gPSBuLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgaWYgKG4ubGVuZ3RoID4gNilcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZyZWUuX2VuY29kZUNoYXJDb2RlIGZvciA6ICcgKyBuKTtcblxuICAgICAgICAvLyDlt6bloavlhYUwIOS7peihpei2szbkvY1cbiAgICAgICAgbiA9IFsnJywgJzAnLCAnMDAnLCAnMDAwJywgJzAwMDAnLCAnMDAwMDAnXVs2IC0gbi5sZW5ndGhdICsgbjtcblxuICAgICAgICByZXR1cm4gbjtcblxuICAgIH0sXG4gICAgX2RlY29kZUNoYXJDb2RlOiBmdW5jdGlvbiAoY2hhckNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIOWFiOWOu+aOieWJjemdoueahDAg5YaNcGFyc2VJbnQg5ZCm5YiZIHBhcnNlSW50KCcwMC0yMzEnKSDlvpfliLAgMFxuICAgICAgICB2YXIgY29kZSA9IHBhcnNlSW50KGNoYXJDb2RlLnN1YnN0cihjaGFyQ29kZS5sYXN0SW5kZXhPZignMC0nKSArIDEpLCAxMCk7XG5cbiAgICAgICAgaWYgKGNvZGUgJSAyID09IDApIHtcbiAgICAgICAgICAgIGNvZGUgPSBjb2RlIC8gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvZGUgPSBjb2RlIC8gMztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlICsgZnJlZS5lKTtcblxuICAgIH0sXG4gICAgZW5jb2RlVGV4dDogZnVuY3Rpb24gKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHZhciBjID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYy5wdXNoKGZyZWUuX2VuY29kZUNoYXJDb2RlKHRleHQuY2hhckNvZGVBdChpKSkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb2RlID0gYy5qb2luKCcnKVxuICAgICAgICBpZiAodGV4dCA9PSBmcmVlLmRlY29kZVRleHRDb2RlKGNvZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KCd3cm9uZyBmcmVlLmVuY29kZVRleHQgZm9yICcgKyB0ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgfSxcbiAgICBkZWNvZGVUZXh0Q29kZTogZnVuY3Rpb24gKGNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHZhciB0ZXh0ID0gW10sIGxhc3RDaGFySW5kZXggPSBjb2RlLmxlbmd0aCAtIDY7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGxhc3RDaGFySW5kZXg7IGkgPSBpICsgNikge1xuICAgICAgICAgICAgdGV4dC5wdXNoKGZyZWUuX2RlY29kZUNoYXJDb2RlKGNvZGUuc3Vic3RyKGksIDYpKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dC5qb2luKCcnKTtcbiAgICB9LFxuICAgIF9wbGFjZUhvbGRlcjogZnVuY3Rpb24gKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9ICcnLCBpID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyICs9IHRleHQuY2hhckNvZGVBdChpKSA+IDI1NSA/ICdfXycgOiAnXyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xuXG4gICAgfSxcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVcbiAgICAgKiBAcGFyYW0gY29kZXMgb3B0aW9uYWws57yW56CB5Y+v5Zyo5q+P5Liq5YWD57Sg5LiKKGluZGVwZW5kZW50Ke+8jOS5n+WPr+WcqGNvZGVz6YeM6Z2iXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZGVjb2RlRG9tVHJlZTogZnVuY3Rpb24gKGVsZSwgY29kZXM/OiBzdHJpbmcgfCBBcnJheSkge1xuICAgICAgICB2YXIgZnJlZVRhZ3MgPSBlbGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZnJlZS50YWcpO1xuICAgICAgICBpZiAoIWZyZWVUYWdzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZihjb2RlcykgPT0gJ3N0cmluZycpXG4gICAgICAgICAgICBjb2RlcyA9IGNvZGVzLnNwbGl0KCcrJyk7XG5cbiAgICAgICAgdmFyIGZyZWVFbGUsIGluZGV4Tm90RGVwZW5kZW50ID0gLTEsIGNvZGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBmcmVlVGFncy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZnJlZUVsZSA9IGZyZWVUYWdzW2ldO1xuICAgICAgICAgICAgLy8g5aaC5p6c5pyJIGRhdGEtY++8jOWwseaYr+eLrOeri+e8luegge+8jOS4jemcgOimgeS7jiBjb2Rlc+S4reWvu+aJvlxuICAgICAgICAgICAgaWYgKGZyZWVFbGUuaGFzQXR0cmlidXRlKCdkYXRhLWMnKSkge1xuICAgICAgICAgICAgICAgIGZyZWVFbGUudGV4dENvbnRlbnQgPSBmcmVlLmRlY29kZVRleHRDb2RlKGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYycpKTtcbiAgICAgICAgICAgICAgICBmcmVlRWxlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGV4Tm90RGVwZW5kZW50Kys7XG4gICAgICAgICAgICAgICAgaWYgKGZyZWVFbGUuaGFzQXR0cmlidXRlKCdkYXRhLWknKSkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZXNbcGFyc2VJbnQoZnJlZUVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaScpKV07XG4gICAgICAgICAgICAgICAgICAgIGZyZWVFbGUucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWknKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZXNbaW5kZXhOb3REZXBlbmRlbnRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyZWVFbGUudGV4dENvbnRlbnQgPSBmcmVlLmRlY29kZVRleHRDb2RlKGNvZGUpXG4gICAgICAgIH1cblxuXG4gICAgfSxcbiAgICAvLyDlhazlhbHnvJbnoIHlrZjlnKjmr4/kuKp0cmVl55qE5pyA5ZCO5LiA5Liq5a2Q5YWD57Sg5LiKXG4gICAgZGVjb2RlRG9tVHJlZXM6IGZ1bmN0aW9uICgkZWxlcykge1xuICAgICAgICAkZWxlcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2RlcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0RWxlbWVudENoaWxkLmhhc0F0dHJpYnV0ZSgnZGF0YS1jJykpXG4gICAgICAgICAgICAgICAgY29kZXMgPSB0aGlzLmxhc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdkYXRhLWMnKVxuICAgICAgICAgICAgZnJlZS5fZGVjb2RlRG9tVHJlZSh0aGlzLCBjb2Rlcyk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgICxcblxuICAgIC8qKlxuICAgICAqIOavj+S4qnRhZ+eahGNvZGXlrZjliLDoh6rlt7HouqvkuIpcbiAgICAgKlxuICAgICAqIHRlc3Q6XG4gICAgICogZnJlZS5lbmNvZGVUYWdlZFN0cmluZ0luZGVwZW5kZW50bHkoJzx6LWZyZWU+Njwvei1mcmVlPjx6LWZyZWUgPjg3PC96LWZyZWU+PHotZnJlZSBvaz1cIjNcIiA+Njwvei1mcmVlPicpXG4gICAgICovXG4gICAgZW5jb2RlVGFnZWRTdHJpbmdJbmRlcGVuZGVudGx5OiBmdW5jdGlvbiAocmF3U3RyKSB7XG4gICAgICAgIHZhciBlbmNvZGVkID0gcmF3U3RyLnJlcGxhY2UoLzx6LWZyZWUoLio/KT4oLis/KTxcXC96LWZyZWU+L2csIGZ1bmN0aW9uIChtYXRjaCwgYXR0cmlzLCB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gJzx6LWZyZWUgZGF0YS1jPVwiJyArIGZyZWUuZW5jb2RlVGV4dCh0ZXh0KSArICdcIicgKyBhdHRyaXMgKyAnPicgKyBmcmVlLl9wbGFjZUhvbGRlcih0ZXh0KSArICc8L3otZnJlZT4nO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJlc3RvcmVkID0gZnJlZS5kZWNvZGVUYWdlZFN0cmluZ0luZGVwZW5kZW50bHkoZW5jb2RlZCk7XG4gICAgICAgIGlmIChyZXN0b3JlZCA9PSByYXdTdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignZnJlZS5lbmNvZGVUYWdlZFN0cmluZ0luZGVwZW5kZW50bHkgJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb3JpZ2luOiAnLCByYXdTdHIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3RvcmVkOiAnLCByZXN0b3JlZCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVjb2RlZCA6ICcsIGVuY29kZWQpO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgLFxuICAgIGRlY29kZVRhZ2VkU3RyaW5nSW5kZXBlbmRlbnRseTogZnVuY3Rpb24gKGNvZGVkU3RyKSB7XG4gICAgICAgIHJldHVybiBjb2RlZFN0ci5yZXBsYWNlKC88ei1mcmVlIGRhdGEtYz1cIihcXFMrKVwiKC4qPyk+Lis/PFxcL3otZnJlZT4vZywgZnVuY3Rpb24gKG1hdGNoLCBjb2RlLCBhdHRyaXMpIHtcbiAgICAgICAgICAgIHJldHVybiAnPHotZnJlZScgKyBhdHRyaXMgKyAnPicgKyBmcmVlLmRlY29kZVRleHRDb2RlKGNvZGUpICsgJzwvei1mcmVlPic7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuICAgICxcbiAgICAvKipcbiAgICAgKlxuICAgICAqIOaJgOaciXRhZ+eahGNvZGXpg73mlL7liLDkuIDkuKrlrZfnrKbkuLLph4zpnaJcbiAgICAgKlxuICAgICAqIHRlc3Q6XG4gICAgICogZnJlZS5lbmNvZGVUYWdlZFN0cmluZygnPHotZnJlZSBlbj1cIm9reSBcIj42PC96LWZyZWU+JylcbiAgICAgKiBmcmVlLmVuY29kZVRhZ2VkU3RyaW5nKCfnrYnliLA8ei1mcmVlIGVuPVwiIGd1bnNob3QgcmFuZyBvdXRcIj7mnqrlk408L3otZnJlZT7jgILpu4TmuJ3mi7/jgIw8ei1mcmVlIGVuPVwiIEp1bmVfRiBHcmVlbiBDYXJkXCI+57u/5Y2hPC96LWZyZWU+44CN5oiRJylcbiAgICAgKiBmcmVlLmVuY29kZVRhZ2VkU3RyaW5nKCc8ei1mcmVlIGVzPVwib2t5IFwiPjY8L3otZnJlZT5hPHotZnJlZT44PC96LWZyZWU+YWFhYTx6LWZyZWU+Njwvei1mcmVlPicpXG4gICAgICovXG4gICAgZW5jb2RlVGFnZWRTdHJpbmc6IGZ1bmN0aW9uIChyYXdTdHIpIHtcblxuICAgICAgICB2YXIgYWxsX2NvZGVzID0gW10sIGN1cnJlbnRDb2RlLCBjdXJyZW50Q29kZUluZGV4ID0gMCwgdGFnSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGVuY29kZWQgPSByYXdTdHIucmVwbGFjZSgvPHotZnJlZSg/OiAoZW58ZXN8cnUpPVwiKFteXCJdKz8pXCIpPyguKj8pPiguKz8pPFxcL3otZnJlZT4vZywgZnVuY3Rpb24gKG1hdGNoLCBsYW5nLCBhbHQsIGF0dHJpcywgdGV4dCkge1xuICAgICAgICAgICAgdGFnSW5kZXgrKztcblxuXG4gICAgICAgICAgICBjdXJyZW50Q29kZSA9IGZyZWUuZW5jb2RlVGV4dCh0ZXh0KTtcbiAgICAgICAgICAgIGN1cnJlbnRDb2RlSW5kZXggPSBhbGxfY29kZXMuaW5kZXhPZihjdXJyZW50Q29kZSk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q29kZUluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgYWxsX2NvZGVzLnB1c2goY3VycmVudENvZGUpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb2RlSW5kZXggPSBhbGxfY29kZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBsYWNlSG9sZGVyVGV4dCA9IGFsdCB8fCBmcmVlLl9wbGFjZUhvbGRlcih0ZXh0KTtcblxuICAgICAgICAgICAgdmFyIGxhbmdBdHRyaSA9ICcnO1xuICAgICAgICAgICAgaWYgKGFsdCAmJiBsYW5nKSB7XG4gICAgICAgICAgICAgICAgbGFuZ0F0dHJpID0gJyBsYW5nPVwiJyArIGxhbmcgKyAnXCInXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q29kZUluZGV4ICE9IHRhZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICc8ei1mcmVlJyArIGxhbmdBdHRyaSArICcgZGF0YS1pPVwiJyArIGN1cnJlbnRDb2RlSW5kZXggKyAnXCInICsgYXR0cmlzICsgJz4nICsgcGxhY2VIb2xkZXJUZXh0ICsgJzwvei1mcmVlPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJzx6LWZyZWUnICsgbGFuZ0F0dHJpICsgYXR0cmlzICsgJz4nICsgcGxhY2VIb2xkZXJUZXh0ICsgJzwvei1mcmVlPic7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdmFyIGNvZGVzID0gYWxsX2NvZGVzLmpvaW4oJysnKTtcbiAgICAgICAgdmFyIHJlc3RvcmVkID0gdGhpcy5kZWNvZGVUYWdlZFN0cmluZyhlbmNvZGVkLCBjb2Rlcyk7XG4gICAgICAgIGlmIChyZXN0b3JlZCA9PSByYXdTdHIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgczogZW5jb2RlZCxcbiAgICAgICAgICAgICAgICBjb2RlczogY29kZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZyZWUuZW5jb2RlVGFnZWRTdHJpbmcnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvcmlnaW46ICcsIHJhd1N0cik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdG9yZWQ6ICcsIHJlc3RvcmVkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWNvZGVkIDogJywgZW5jb2RlZCk7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICAsXG4gICAgZGVjb2RlVGFnZWRTdHJpbmc6IGZ1bmN0aW9uIChjb2RlZFN0ciwgY29kZXMpIHtcblxuICAgICAgICBjb2RlcyA9IGNvZGVzLnNwbGl0KCcrJyk7XG4gICAgICAgIHZhciB0YWdJbmRleCA9IC0xO1xuICAgICAgICByZXR1cm4gY29kZWRTdHIucmVwbGFjZSgvPHotZnJlZSg/OiBsYW5nPVwiKGVufGVzKVwiKT8oPzogZGF0YS1pPVwiKFxcdys/KVwiKT8oLio/KT4oLis/KTxcXC96LWZyZWU+L2csIGZ1bmN0aW9uIChtYXRjaCwgbGFuZywgY29kZUluZGV4LCBhdHRyaXMsIGFsdCkge1xuICAgICAgICAgICAgY29kZUluZGV4ID0gY29kZUluZGV4IHx8ICsrdGFnSW5kZXg7XG4gICAgICAgICAgICBpZiAobGFuZykge1xuICAgICAgICAgICAgICAgIHJldHVybiAnPHotZnJlZSAnICsgbGFuZyArICc9XCInICsgYWx0ICsgJ1wiJyArIGF0dHJpcyArICc+JyArIGZyZWUuZGVjb2RlVGV4dENvZGUoY29kZXNbY29kZUluZGV4XSkgKyAnPC96LWZyZWU+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICc8ei1mcmVlJyArIGF0dHJpcyArICc+JyArIGZyZWUuZGVjb2RlVGV4dENvZGUoY29kZXNbY29kZUluZGV4XSkgKyAnPC96LWZyZWU+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGhhc1pjQ29kZTogZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5pbmRleE9mKCc8JyArIGZyZWUudGFnKSA+IC0xO1xuICAgIH1cbn1cblxuXG5mcmVlLnRhZyA9IGZyZWUuZGVjb2RlVGV4dENvZGUoXCItOTExMTktNjA5MDAtOTExNzktOTExNDMtNjA3ODgtNjA3ODhcIik7IC8vICAnei1mcmVlJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZyZWU7XG4iXX0=